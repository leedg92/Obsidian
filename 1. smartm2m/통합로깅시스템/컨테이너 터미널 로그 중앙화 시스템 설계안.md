
## 1. ì „ì²´ ë³€í™˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì ìš©ì˜ í•œê³„

### í˜„ì‹¤ì  ì–´ë ¤ì›€

- **í„°ë¯¸ë„ë§ˆë‹¤ í™˜ê²½ ìƒì´**: Java 8/11 ë“±, ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬(logback/log4j ë“±) í˜¼ìž¬
- **ë¡œê·¸ í˜•íƒœ ë‹¤ì–‘**: JSON, Map, String, Object ë“± ë°ì´í„° íƒ€ìž… ì œê°ê°
- **ë„ì»¤ í™˜ê²½ ë³µìž¡ë„**: ê°™ì€ í„°ë¯¸ë„ ë‚´ì—ì„œë„ ì»¨í…Œì´ë„ˆë³„ë¡œ Java ë²„ì „ ë‹¤ë¦„
- **í´ëž˜ìŠ¤ë³„ ë¡œê¹… ë°©ì‹ ì°¨ì´**: ê°™ì€ í”„ë¡œì íŠ¸ ë‚´ì—ì„œë„ ê°œë°œìžë§ˆë‹¤ ë¡œê¹… ë°©ë²• ìƒì´

### ì˜ˆìƒ ê³µìˆ˜

- 10ê°œ í„°ë¯¸ë„ Ã— í‰ê·  5ê°œ í”„ë¡œì íŠ¸ = **ìµœì†Œ 50ê°œ ë°°í¬**
- ê° í™˜ê²½ë³„ í…ŒìŠ¤íŠ¸ ë° ë°°í¬ ì¼ì • ì¡°ìœ¨
- ì˜ˆìƒ ì†Œìš” ì‹œê°„: **3~6ê°œì›”**
- ìš´ì˜ ì‹œìŠ¤í…œ ìˆ˜ì •ì— ë”°ë¥¸ **ë†’ì€ ë¦¬ìŠ¤í¬**

---

## 2. ë‹¨ìˆœ ìˆ˜ì§‘ ë°©ì‹(ë ˆì´í¬)ì˜ ìž¥ì 

### "ë©”ì‹œì§€:ë°ì´í„°" í˜•íƒœë¡œë§Œ ìˆ˜ì§‘

```java
// ê¸°ì¡´ ì‹œìŠ¤í…œì€ ê±´ë“œë¦¬ì§€ ì•ŠìŒ
// Fluentd/Filebeatê°€ ë¡œê·¸ íŒŒì¼ ê·¸ëŒ€ë¡œ ìˆ˜ì§‘
```

### í•µì‹¬ ìž¥ì 

âœ… **ê¸°ì¡´ ì‹œìŠ¤í…œ ë¬´ë³€ê²½**: ìš´ì˜ ì¤‘ì¸ í„°ë¯¸ë„ ì‹œìŠ¤í…œ ìˆ˜ì • ë¶ˆí•„ìš”  
âœ… **ë¹ ë¥¸ êµ¬ì¶•**: 2ì£¼ ë‚´ ë¡œê·¸ ìˆ˜ì§‘ ì‹œìž‘ ê°€ëŠ¥  
âœ… **ë¦¬ìŠ¤í¬ ìµœì†Œí™”**: ë¡œê·¸ ìˆ˜ì§‘ê¸°ë§Œ ì¶”ê°€, ì• í”Œë¦¬ì¼€ì´ì…˜ ì•ˆì •ì„± ì˜í–¥ ì—†ìŒ  
âœ… **ì™„ì „í•œ ë°ì´í„° ë³´ì¡´**: ì›ë³¸ ê·¸ëŒ€ë¡œ ì €ìž¥ìœ¼ë¡œ ìž¬ë¶„ì„ ê°€ëŠ¥  
âœ… **ì ì§„ì  ê°œì„ **: ì‹¤ì œ ë°ì´í„° í™•ì¸ í›„ í‘œì¤€ ì •ì˜ ê°€ëŠ¥

---

## 3. ClickHouse ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Kafka í† í”½ 10ê°œ                  â”‚
â”‚    (terminal1-logs ~ terminal10-logs)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ClickHouse Kafka í…Œì´ë¸” (1ê°œ)            â”‚
â”‚          (10ê°œ í† í”½ ë™ì‹œ êµ¬ë…)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚     MV1      â”‚ (ë‹¨ìˆœ ì´ê´€)
          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚   ë ˆì´í¬ í…Œì´ë¸”    â”‚
       â”‚   (ì›ë³¸ ë³´ì¡´)     â”‚
       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
       [ë°ì´í„° ë¶„ì„]
       (2ì£¼ê°„ íŒ¨í„´ íŒŒì•…)
              â†“
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚     MV2      â”‚ (íŒŒì‹±/ì •ì œ) - ë‚˜ì¤‘ì— ì¶”ê°€
       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ì›¨ì–´í•˜ìš°ìŠ¤ í…Œì´ë¸”  â”‚
    â”‚  (ì •ì œ ë°ì´í„°)    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
### í…Œì´ë¸” êµ¬ì¡°

**ë ˆì´í¬ í…Œì´ë¸”** (logs_lake)

- log_data: String 
- terminal: String
- level: String
- message: UInt8
- timestamp: DateTime

**ì›¨ì–´í•˜ìš°ìŠ¤ í…Œì´ë¸”** (logs_warehouse) - ë ˆì´í¬ ë°ì´í„° ë¶„ì„ í›„ ì¶”ê°€

---

## 4. ë ˆì´í¬ë¥¼ ë‘ëŠ” ì´ì 

### ë°ì´í„° ë³´ì¡´ ê´€ì 

ðŸ“Œ **ì›ë³¸ ë°ì´í„° ì˜êµ¬ ë³´ì¡´**

- ë¡œê·¸ í˜•íƒœê°€ ë‹¬ë¼ë„ Stringìœ¼ë¡œ ëª¨ë‘ ìˆ˜ìš©
- ì •ì œ ë¡œì§ ì‹¤ìˆ˜í•´ë„ ìž¬ì²˜ë¦¬ ê°€ëŠ¥
- ì˜ˆìƒì¹˜ ëª»í•œ ë¶„ì„ ìš”êµ¬ì‚¬í•­ ëŒ€ì‘

### ìš´ì˜ ê´€ì 

ðŸ“Œ **ë‹¨ê³„ì  êµ¬ì¶• ê°€ëŠ¥**

```
step 1: ë ˆì´í¬ êµ¬ì¶• (ì¼ë‹¨ ëª¨ìœ¼ê¸°)
step 2: ë°ì´í„° ë¶„ì„ (íŒ¨í„´ íŒŒì•…)
step +:  ì •ì œ ë ˆì´ì–´ ì¶”ê°€ (ì ì§„ì )
```

---

## 5. Materialized Viewë¡œ ì •ì œí•˜ëŠ” ì´ì 

### ì¦‰ì‹œ ì„œë¹„ìŠ¤ ê°€ëŠ¥

```
ë ˆì´í¬ êµ¬ì¶• ì™„ë£Œ â†’ ë°”ë¡œ ì¡°íšŒ/ë¶„ì„ ê°€ëŠ¥
(ì •ì œ ì•ˆ ë˜ì–´ë„ ì„œë¹„ìŠ¤ êµ¬ì¶• ê°€ëŠ¥)
```

### ì ì§„ì  ê°œì„ 

```sql
-- 1ë‹¨ê³„: ë ˆì´í¬ë§Œ (ì›ë³¸ ê·¸ëŒ€ë¡œ)
ë ˆì´í¬ í…Œì´ë¸” â†’ ì¡°íšŒ/ë¶„ì„

-- 2ë‹¨ê³„: ë¶„ì„ í›„ MV ì¶”ê°€ (ì •ì œ ë ˆì´ì–´)
ë ˆì´í¬ â†’ MV2 â†’ ì›¨ì–´í•˜ìš°ìŠ¤ â†’ ë” ë‚˜ì€ ì¡°íšŒ
```

### í•µì‹¬ ìž¥ì 

âœ… **ë¹„ì¹¨íˆ¬ì  ê°œì„ **: ë ˆì´í¬ ìš´ì˜í•˜ë©´ì„œ ë™ì‹œì— ì •ì œ ë ˆì´ì–´ êµ¬ì¶•  
âœ… **ë¡œì§ ë³€ê²½ ìš©ì´**: MVë§Œ ìˆ˜ì •í•˜ë©´ ë¨, ì›ë³¸ì€ ê·¸ëŒ€ë¡œ  
âœ… **ë…ë¦½ì  í…ŒìŠ¤íŠ¸**: ì •ì œ ë¡œì§ ê²€ì¦ í›„ ì ìš© ê°€ëŠ¥  
âœ… **íšì¼í™”ëœ ì„œë¹„ìŠ¤**: í‘œì¤€ ìŠ¤í‚¤ë§ˆ í™•ì • í›„ ì ì§„ì  ë„ìž…

### ì‹¤ë¬´ íë¦„

```
1. ë ˆì´í¬ì— ë°ì´í„° ìˆ˜ì§‘
   â†“
2. ì‹¤ì œ ë¡œê·¸ íŒ¨í„´ ë¶„ì„
   - í„°ë¯¸ë„ë³„ ë¡œê·¸ í˜•íƒœ íŒŒì•…
   - ê³µí†µ í•„ë“œ ì •ì˜ (5~10ê°œ)
   â†“
3. MV2 ìƒì„± (ì •ì œ ë¡œì§)
   - ë ˆì´í¬ëŠ” ê³„ì† ìš´ì˜ ì¤‘
   - ì›¨ì–´í•˜ìš°ìŠ¤ì— ì •ì œëœ ë°ì´í„° ìŒ“ìž„
   â†“
4. ì„œë¹„ìŠ¤ ì ì§„ì  ì „í™˜
   - ì‹ ê·œ ëŒ€ì‹œë³´ë“œ: ì›¨ì–´í•˜ìš°ìŠ¤ ì‚¬ìš©
   - ë ˆê±°ì‹œ ë¶„ì„: ë ˆì´í¬ ê³„ì† ì‚¬ìš©
```

---

## 6. êµ¬ì¡° ë¹„êµ

### âŒ ì „ì²´ ë³€í™˜ ë°©ì‹

```
ê° í„°ë¯¸ë„ (50ê°œ í”„ë¡œì íŠ¸)
  â†’ ì»¤ìŠ¤í…€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì ìš©
  â†’ í‘œì¤€ í˜•íƒœë¡œ ë³€í™˜
  â†’ Kafka
  â†’ ClickHouse

ë¬¸ì œì :
- ê° í„°ë¯¸ë„ ì—ì´ì „íŠ¸ì— puttyë¡œ ì ‘ê·¼ í›„ì— ëª¨ë“  ë¡œê·¸ íŒŒì•… 
- ê° ì†ŒìŠ¤ì½”ë“œì˜ ë¡œê¹… ì½”ë“œë¸”ë¡ ìˆ˜ì •í•„ìš”í•¨
  log.ing(data) -> log.terminal(terminal).message(message).context("log_data", data)...
```

### âœ… ë ˆì´í¬ ìš°ì„  ë°©ì‹

```
ê° í„°ë¯¸ë„
  â†’ ê¸°ì¡´ ë¡œê·¸ ê·¸ëŒ€ë¡œ
  â†’ Fluentd ìˆ˜ì§‘
  â†’ Kafka
  â†’ ClickHouse ë ˆì´í¬ (2ì£¼ ì™„ë£Œ)
  â†’ MV â†’ ì›¨ì–´í•˜ìš°ìŠ¤ (ì ì§„ì )

ìž¥ì :
- í´ë¦­í•˜ìš°ìŠ¤ì—ì„œ ì „ì²´ í„°ë¯¸ë„ì˜ ë¡œê·¸ ë°ì´í„° í˜•íƒœ í•œëˆˆì— íŒŒì•… ê°€ëŠ¥
- ê° ì†ŒìŠ¤ì½”ë“œì˜ ë¡œê¹… ì½”ë“œë¸”ë¡ì˜ ë©”ì„¸ì§€ë§Œ ìˆ˜ì •
  log.info(data) -> log.info(message+":"+data)
```

