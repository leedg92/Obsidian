# CCS E-slip API 인터페이스 명세서

> **Base URL**: `/api/eslip`
> **Content-Type**: `application/json`
> **서비스**: 전자인수도증 관리 API (ClickHouse)

---

## 공통 응답 형식

모든 API는 `ResponseFormat<T>` 래퍼로 응답합니다.

| 필드 | 타입 | 설명 |
|------|------|------|
| result | String | 처리 결과 (`success` / `failure`) |
| resultMessage | String | 결과 메시지 |
| data | T | 응답 데이터 |

---

## 1. 전자인수도증 목록 조회

전자인수도증 목록을 페이징하여 조회합니다. 총 개수와 목록을 비동기 병렬로 처리합니다.

- **URL**: `POST /api/eslip/list`

### Request Body

| 필드 | 타입 | 필수 | 설명 |
|------|------|------|------|
| fromTime | String | N | 시작 시간 (`YYYY-MM-DD HH:mm:ss`) |
| toTime | String | N | 종료 시간 (`YYYY-MM-DD HH:mm:ss`) |
| fromDate | String | N | 시작 날짜 (`YYYY-MM-DD`) |
| toDate | String | N | 종료 날짜 (`YYYY-MM-DD`) |
| serviceType | String | N | 서비스 타입 (`vbs` / `tss`) |
| targetTerminal | String | N | 대상 터미널 (단일) |
| targetTerminals | List\<String\> | N | 대상 터미널 목록 (다중, RBAC용) |
| keyword | String | N | 검색 키워드 |
| pageNo | int | Y | 페이지 번호 (1부터 시작) |
| pageSize | int | Y | 페이지 크기 |
| isTestbedMode | boolean | Y | 테스트베드 모드 여부 |

### Response (`data`)

| 필드 | 타입 | 설명 |
|------|------|------|
| totalCount | int | 총 개수 |
| list | List\<EslipListItem\> | 목록 |

#### EslipListItem

| 필드 | 타입 | 설명 |
|------|------|------|
| timestamp | String | 타임스탬프 |
| serviceKey | String | 서비스 키 |
| serviceType | String | 서비스 타입 (`vbs` / `tss`) |
| conNo | String | 컨테이너 번호 |
| inOut | String | 반출입 구분 |
| funcName | String | 기능명 |
| truckNo | String | 차량 번호 |
| terminal | String | 터미널 |

---

## 2. 전자인수도증 상세 조회

서비스 타입을 자동 감지하여 VBS/TSS 상세 정보를 조회합니다.

- **URL**: `POST /api/eslip/detail`

### Request Body

| 필드 | 타입 | 필수 | 설명 |
|------|------|------|------|
| serviceKey | String | Y | 서비스 키 |
| targetTerminal | String | N | 대상 터미널 (VBS용) |
| outTerminal | String | N | 반출 터미널 (TSS용) |
| inTerminal | String | N | 반입 터미널 (TSS용) |
| inOutType | String | N | 반출입 타입 (`in` / `out`) |
| isTestbedMode | boolean | Y | 테스트베드 모드 여부 |

### Response (`data`)

| 필드            | 타입     | 설명                               |
| ------------- | ------ | -------------------------------- |
| serviceType   | String | 서비스 타입 (`vbs` / `tss` / `group`) |
| docKey        | String | 문서 키                             |
| pinNo         | String | PIN 번호                           |
| conNo         | String | 컨테이너 번호                          |
| truckNo       | String | 차량 번호                            |
| terminal      | String | 터미널 (VBS)                        |
| groupTerminal | String | 그룹 터미널 (TSS group)               |
| outTerminal   | String | 반출 터미널 (TSS)                     |
| inTerminal    | String | 반입 터미널 (TSS)                     |
| truckCode     | String | 차량 코드                            |
| inOut         | String | 반출입 구분                           |
| shippingCode  | String | 선사 코드                            |
| conType       | String | 컨테이너 타입                          |
| feType        | String | FE 타입 (FULL / EMPTY)             |
| truckerId     | String | 차주 ID (없을 경우 발송자 ID로 대체)         |
| timestamp     | String | 타임스탬프                            |

> **참고**: VBS인 경우 `terminal` 필드에 값이 들어가고 `outTerminal`, `inTerminal`, `groupTerminal`은 null입니다.
> 단건 TSS인 경우 `outTerminal`, `inTerminal`에 값이 들어가고 `terminal`은 null입니다.
> 그룹 TSS인 경우 `groupTerminal`에만 값이 들어갑니다.

---

## 3. 전자인수도증 서비스 타입 조회

특정 전자인수도증의 서비스 타입을 조회합니다.

- **URL**: `POST /api/eslip/type`

### Request Body

| 필드 | 타입 | 필수 | 설명 |
|------|------|------|------|
| serviceKey | String | Y | 서비스 키 |
| targetTerminal | String | N | 대상 터미널 (VBS용) |
| outTerminal | String | N | 반출 터미널 (TSS용) |
| inTerminal | String | N | 반입 터미널 (TSS용) |
| inOutType | String | N | 반출입 타입 (`in` / `out`) |
| isTestbedMode | boolean | Y | 테스트베드 모드 여부 |

### Response (`data`)

| 타입 | 설명 |
|------|------|
| String | 서비스 타입 (`vbs` / `tss`) |

---

## 4. 전자인수도증 로그 조회

특정 전자인수도증의 상세 로그를 조회합니다.

- **URL**: `POST /api/eslip/logs`

### Request Body

| 필드             | 타입      | 필수  | 설명                    |
| -------------- | ------- | --- | --------------------- |
| serviceKey     | String  | Y   | 서비스 키                 |
| targetTerminal | String  | N   | 대상 터미널 (VBS용)         |
| outTerminal    | String  | N   | 반출 터미널 (TSS용)         |
| inTerminal     | String  | N   | 반입 터미널 (TSS용)         |
| inOutType      | String  | N   | 반출입 타입 (`in` / `out`) |
| isTestbedMode  | boolean | Y   | 테스트베드 모드 여부           |

### Response (`data`)

| 타입 | 설명 |
|------|------|
| String | 상세 로그 데이터 |
