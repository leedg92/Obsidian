- ?? : 운송 사이클에서 체크표시에 대한 요청자와 응답자가 어딘지
- 알람은 요청자는 블록체인이고, 응답자는 백엔드 api로 보임
- 그럼 우선 흐름을 파악하고 집중적으로 정리는 알람표시 부분만 보는게 맞는지? 
- 이거 아닌가... https://portit.smartm2m.co.kr/allcone/eslip-status/issue-status/detail?serviceKey=MSC_MEDUPQ570020_MSDU6253156#0 여기 그림기준으로 설명좀 해달라 해보자

- createCopino는 운송사(postman) -> 블록체인 / 블록체인 -> Bctrans
- 그다음 운송관련 데이터는 TOS <-> 터미널에이전트 -> 블록체인 -> bctrans
					- (          postman          )
# 테이블

```
-- 트럭 코드인
select * from tb_b_hide_truck_code ;

-- ITT운송오더이력
select * from tb_b_trans_odr_h ;

-- 운송상태이력
select * from tb_b_trans_status_h ;

-- 운송차량
select * from tb_b_trans_trucks ;

-- 운송차량오더
select * from tb_b_truck_trans_odr ;

-- 차량그룹오더
select * from tb_b_truck_trans_odr_grp ;

-- TSS그룹오더컨테이너
select * from tb_b_tss_group_order_c ;

-- TSS그룹오더차량
select * from tb_b_tss_group_order_t ;

-- TSS그룹오더마스터
select * from tb_b_tss_group_order_m ;
```

# API별 변경 테이블
### 1. CreateCopino
- 블록체인에서 코피노(사전반출입정보)를 받아 생성한 docKey외의 터미널, 컨테이너, 차량 정보 등을 Chainportal, 반출 터미널, 반입 터미널에 전송(api call)한다.
```
{
  "method": "CreateCopino",
  "result_message": {
    "code": 0,
    "message": {
      "docKey": "MSC_MEDUPQ570020_MSDU6253156",
      "outTerminal": "PNC",
      "outTerminalCode": "PNCOC010",
      "inTerminal": "BCT",
      "inTerminalCode": "BCTHD010",
      "conNo": "MSDU6253156",
      "truckNo": "충남99사6253",
      "truckCode": "CITN6253",
      "shippingCode": "MSC",
      "conType": "4510",
      "truckerId": "CITLC051",
      "combineConNo": "",
      "feType": "5",
      "conWeight": "18491",
      "temp": "",
      "tempUnit": "",
      "overLength": "0",
      "overWidth": "0",
      "overHeight": "0",
      "imdgCode": "",
      "unnoCode": "",
      "senderBizNo": "",
      "requestSeq": "",
      "tokenId": "",
      "entCd": "",
      "restrictedEntryDateTime": "",
      "inTerminalAlarm": "false"
    }
  }
}
```
- 이때 TB_B_TRUCK_TRANS_ODR(운송차량오더) 테이블에 전송한 정보가 insert된다.
```
{[
	{
		"DOC_KEY" : "MSC_MEDUPQ570020_MSDU6253156",
		"TRANS_SN" : null,
		"SHPPNG_CD" : "MSC",
		"TRK_ID" : "CITLC051",
		"OUT_TML_CD" : "PNCOC010",
		"OUT_TML_NM" : "PNC",
		"IN_TML_CD" : "BCTHD010",
		"IN_TML_NM" : "BCT",
		"CON_NO" : "MSDU6253156",
		"CON_TP" : "4510",
		"TRUCK_NO" : "충남99사6253",
		"DISP_DT" : "20250514154342",
		"FE_TP" : "5",
		"OVER_LTH" : "0",
		"OVER_WTH" : "0",
		"OVER_HGT" : "0",
		"TEMP" : "",
		"TEMP_UNIT" : "",
		"OUT_CON_LOC" : null,
		"IN_CON_LOC" : null,
		"TRANS_STAT" : 10,
		"TRANS_STAT_DT" : "2025-05-14T06:43:42.000Z",
		"TRANS_DONE_DT" : null,
		"FROM_GATE_IN_DT" : null,
		"TO_GATE_IN_DT" : null,
		"OUT_TURN_TIME" : null,
		"IN_TURN_TIME" : null,
		"REG_DT" : "2025-05-14T06:43:42.000Z",
		"MOD_DT" : "2025-05-14T06:43:42.000Z",
		"REMAIN_DIST" : null,
		"DISP_GRP" : null,
		"ERR_YN" : null,
		"ERR_MSG" : null,
		"RF_PWR_ST" : null,
		"ESLIP_SHOWN" : "N",
		"CHG_OUT_CON_LOC_CNT" : null,
		"CHG_IN_CON_LOC_CNT" : null,
		"IMDG_CD" : null,
		"VGM" : null,
		"RF_PWR_ST_UPD_DTM" : null,
		"VGM_UNIT_CD" : null,
		"COMMODITY_TP" : null,
		"X_RAY_INSP_YN" : null,
		"CON_TP_DIS_NM" : null,
		"UNNO_CODE" : null,
		"CON_WEIGHT" : null,
		"ETC_MSG" : null,
		"EXPIRED_DT" : null,
		"UNLOAD_DT" : null,
		"LOAD_DT" : null,
		"OUT_TP_ESLIP_SHOWN" : "N",
		"IN_TP_ESLIP_SHOWN" : "N",
		"GATE_TP" : null,
		"ETC_MSG2" : null,
		"SENDER_ID" : null,
		"ENT_CD" : null,
		"BIZ_NO" : null,
		"UNLOAD_CON_LOC" : null,
		"CANCEL_MSG" : null,
		"IN_MOVE_LOC" : null,
		"OUT_MOVE_LOC" : null
	}
]}

```
