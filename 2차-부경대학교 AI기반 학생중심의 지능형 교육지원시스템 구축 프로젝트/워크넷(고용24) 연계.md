
| 순번  | 코드명  |                  코드                  |
| :-: | :--: | :----------------------------------: |
|  1  | 학과정보 | abdc7bf0-81dd-46dc-b625-b243dc5d52c5 |
|  2  | 심리검사 | 75a1364d-8338-41ff-9f5f-7aba463a10bb |
|  3  | 직업정보 | 30ffd43b-309a-40c6-9720-598641031da4 |
|  4  | 채용정보 | cf3f171f-81d6-4801-bb9a-eab76684bc10 |
### Flow
1. 에어플로우에서 Open API를 호출해 XML을 Json형태로 변환
2. 전처리한 데이터를 에어플로우에서 BODY에 넣은 후 POST방식으로 WAS에 올라가있는 자바 API를 호출 
3. 자바 API에서는 받은 body를 DB에 upsert

```mermaid  
flowchart TD

    %% 추가된 다른 경로
    A --> B[Open API 호출] -->|XML To Json| A;

    A[에어플로우] -->|POST 호출| C[내부 API];
    C --> D[DB];

```


### 상세
- 직업 상세정보
	- DAG : JOB_INFO_DAG
	- API : https://pknuai.pknu.ac.kr/web/upsertJobInfo?mId=210
	- TABLE : UNI_WORKNET_JOB_INFO
	1. 직업 상세정보 API호출
		- 모든 데이터를 Json형태로 변환
	2. API 호출
	3. API에서 Json을 처리 후 upsert
	   
- 일반학과 상세정보
	- DAG : MAJOR_DETAIL_DAG
	- API :  https://pknuai.pknu.ac.kr/web/upsertMajorDetail?mId=210
	- TABLE : UNI_WORKNET_MAJOR_DETAIL
	1. 일반학과 상세정보 API호출(LOOP)
		- 요청 parameter 중 학과ID를 1씩 높여 호출 후 필요한 데이터만 Json형태로 변환 후 배열에 저장
		- 학과ID를 올렸을 때 더이상 데이터가 나타나지 않으면 계열ID를 하나 올린다.
		- 계열ID를 올렸을 때 더이상 데이터가 나타나지 않으면 모든 데이터를 가져왔다고 판단, LOOP 종료
	2. API 호출 
	3. API에서 Json을 처리 후 upsert

- 공채속보
	- DAG : OPEN_RECRUITMENT_DAG
	- API : https://pknuai.pknu.ac.kr/web/upsertOpenRecuritment?mId=210
	1. 배치주기(미정)마다 API 호출(LOOP)
		- 요청 parameter 중 시작페이지를 1씩 높여 호출 후 필요한 데이터만 Json형태로 변환 후 배열에 저장(display는 100으로 고정)
		- 시작페이지를 올렸을 때 더이상 데이터가 나타나지 않으면 모든 데이터를 가져왔다고 판단, LOOP 종료
	2. API 호출
	3. API에서 Json을 처리 후 upsert

   



   