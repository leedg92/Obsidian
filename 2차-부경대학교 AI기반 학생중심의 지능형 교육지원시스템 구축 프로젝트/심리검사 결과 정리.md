![[[붙임2] S. 직업선호도검사(S형)_결과표 구성 문구_v.2.xlsx]]

```
This XML file does not appear to have any style information associated with it. The document tree is shown below.  

<examRsltRoot>

<adultJobAptExam>

<total>0</total>

</adultJobAptExam>

<adultJobAptReviseExam>

<total>0</total>

</adultJobAptReviseExam>

<jobPrefExamS>

<total>1</total>

<examRslt>

<psyExamCd>S</psyExamCd>

<psyExamNo>000043863051</psyExamNo>

<examDt>20241112</examDt>

<intrst1Nm>R</intrst1Nm>

<intrst1Sco>8</intrst1Sco>

<intrst2Nm>I</intrst2Nm>

<intrst2Sco>3</intrst2Sco>

<score1Nm>R</score1Nm>

<score1Rw>8</score1Rw>

<score1St>55</score1St>

<score2Nm>I</score2Nm>

<score2Rw>3</score2Rw>

<score2St>44</score2St>

<score3Nm>A</score3Nm>

<score3Rw>3</score3Rw>

<score3St>35</score3St>

<score4Nm>S</score4Nm>

<score4Rw>3</score4Rw>

<score4St>36</score4St>

<score5Nm>E</score5Nm>

<score5Rw>1</score5Rw>

<score5St>38</score5St>

<score6Nm>C</score6Nm>

<score6Rw>3</score6Rw>

<score6St>38</score6St>

<jobInfo>[{"oesCd":"8161","oesNm":"일반기계조립원"},{"oesCd":null,"oesNm":"금속재료공학시험원"},{"oesCd":"1222","oesNm":"생명과학 시험원"},{"oesCd":null,"oesNm":"선박조립원"},{"oesCd":null,"oesNm":"영상 녹회 및 편집기사"},{"oesCd":null,"oesNm":"웹엔지니어"},{"oesCd":"8171","oesNm":"자동차 조립원"},{"oesCd":"8124","oesNm":"자동차정비원"},{"oesCd":"1212","oesNm":"자연과학시험원"},{"oesCd":null,"oesNm":"전기, 전자 및 기계공학 시험원"},{"oesCd":null,"oesNm":"전기안전기술자"},{"oesCd":null,"oesNm":"송배전설비기술자"},{"oesCd":null,"oesNm":"전자계측제어기술자"},{"oesCd":"1404","oesNm":"조경기술자"},{"oesCd":null,"oesNm":"철도 기관차 및 전동차 정비원"},{"oesCd":null,"oesNm":"통신 및 관련장비설치 및 수리원"},{"oesCd":"8221","oesNm":"판금원"},{"oesCd":null,"oesNm":"고무 및 플라스틱화학공학기술자, 도료 및 농약품화학공학기술자, 석유화학공학기술자, 음식료품화학공학기술자, 의약품화학공학기술자, 비우 및 화장품 화학공학기술자, 화학분석시험원"},{"oesCd":"1542","oesNm":"화학공학 시험원"},{"oesCd":null,"oesNm":"환경공학 기술자 및 연구원, 환경공학시험원"},{"oesCd":null,"oesNm":"건축설계기술자"},{"oesCd":null,"oesNm":"교통계획 및 설계가"},{"oesCd":null,"oesNm":"산업기계 공학기술자(메카트로닉스)"},{"oesCd":null,"oesNm":"기계공학기술자"},{"oesCd":null,"oesNm":"발전설비기술자"},{"oesCd":null,"oesNm":"산업공학기술자"},{"oesCd":"1561","oesNm":"섬유공학기술자 및 연구원"},{"oesCd":null,"oesNm":"가스, 에너지 기술자 및 연구원"},{"oesCd":"3011","oesNm":"전문의사"},{"oesCd":null,"oesNm":"의료장비기사"},{"oesCd":null,"oesNm":"의약품화학공학기술자"},{"oesCd":null,"oesNm":"자동차공학기술자"},{"oesCd":"1312","oesNm":"통신공학 기술자 및 연구원"},{"oesCd":null,"oesNm":"컴퓨터 하드웨어 기술자"},{"oesCd":null,"oesNm":"조선(선박), 항공기 및 철도차량 공학기술자"},{"oesCd":null,"oesNm":"해양공학기술자"},{"oesCd":null,"oesNm":"건축가 및 건축공학 기술자"}]</jobInfo>

</examRslt>

</jobPrefExamS>

<founfExamAptd>

<total>0</total>

</founfExamAptd>

<jobValsExam>

<total>0</total>

</jobValsExam>

<youthJobIntrstExam>

<total>0</total>

</youthJobIntrstExam>

<tngrOccpIntsExam>

<total>0</total>

</tngrOccpIntsExam>

<univMajorIntrstExam>

<total>0</total>

</univMajorIntrstExam>

<youthHiStudAptdExam>

<total>0</total>

</youthHiStudAptdExam>

<prefExamLNewExam>

<total>0</total>

</prefExamLNewExam>

<fndJobExamRdyExam>

<total>0</total>

</fndJobExamRdyExam>

<univPathRdyExam>

<total>0</total>

</univPathRdyExam>

</examRsltRoot>
```


로그인 정보
- 박주하
- 202412342
- 생물공학과
- 060208
- 여자

결과 URL : `https://www.work24.go.kr/cm/openApi/call/wk/callOpenApiSvcInfo214L01.do?authKey=75a1364d-8338-41ff-9f5f-7aba463a10bb&returnType=XML&userInfo3=U0387&userInfo4`
## 테이블 정리

#### 검사 페이지 접근 로그 테이블
- 테이블 명 : UNI_WORKNET_PSY_EXAM_ACCESS
- 컬럼 정보 : 
	- STD_NO : 학번
	- ACCESS_DATE : 검사페이지 접근 일시(DEFAULT : SYSDATE)
	- ADULT_JOB_APT_REVISE_EXAM_YN : 성인용 직업적성검사(개정) 결과 유무
	- JOB_PREF_EXAM_S_YN : 직업선호도검사 S형 결과 유무

|  STD_NO   | ACCESS_DATE | ADULT_JOB_APT_REVISE_EXAM_YN | JOB_PREF_EXAM_S_YN |
| :-------: | :---------: | ---------------------------- | ------------------ |
| 202412322 |  20241128   |                              |                    |
| 202412342 |  20241129   |                              |                    |


#### 검사 결과 저장 테이블
- 테이블 명 : UNI_WORKNET_PSY_EXAM_RESULT
- 컬럼 정보 : 
	- STD_NO : 학번
	- RESULT : 심리검사 결과 API RETURN 값(XML)
	- MODI_DATE : 등록or수정일

|  STD_NO   |     RESULT     | MODI_DATE |
| :-------: | :------------: | --------- |
| 202412342 | 결과(XML 형태 그대로) |           |


### 프로세스
##### 검사 실시 후 당일에 결과보기 클릭 하는 경우
1. \[심리검사 실시\]버튼 클릭 시 DB INSERT(이미 존재할 시 항목 둘다 N, 접근날짜 UPDATE)
2. \[심리검사 결과보기\]버튼 클릭 시 로그테이블에 학번에 대한 결과존재유무를 조회
	- `검사 페이지 접근 로그 테이블`의 두가지 항목 중 하나이상 N이면 검사결과 API호출
	  - 검사결과(XML)를 자바에서 읽은 뒤 
	    jobPrefExamS(직업선호도검사 S형), adultJobAptReviseExam(성인용 직업적성검사(개정))태그안의 total태그를 확인
	    - 모두 0이면 검사를 다 받지 않았거나, 워크넷 DB에 데이터가 없는것이기 때문에 아직 검사를 완료하지 않았다는 alert(문구는 추후에 결정)
		- 하나라도 1이상이면 API결과를 `검사 결과 저장 테이블`에 저장 +  `검사 페이지 접근 로그 테이블`에 해당하는 항목에 Y 업데이트 후 화면에 표출
			- 조회한 항목에 대한 `검사 페이지 접근 로그 테이블`의 결과유무가 N일시 아직 검사를 완료하지 않았다는 alert(문구는 추후 결정)
	-  `검사 페이지 접근 로그 테이블`의 두가지 항목 모두 Y이면 `검사 결과 저장 테이블`에서 해당하는 학번의 결과를 읽어온 뒤 화면에 표출

##### 검사 실시 후 당일에 결과보기를 클릭 하지 않은 경우 (+ 검사를 당일에 끝내지 않을경우)
1. \[심리검사 실시\]버튼 클릭 시 DB INSERT(이미 존재할 시 항목 둘다 N, 접근날짜 UPDATE)
2. 검사결과의 존재 유무를 조회(매일 밤 23시 59분에 호출)
	- 두 항목중 N이 하나 이상일 시 
	  - 검사결과(XML)를 자바에서 읽은 뒤 
	    jobPrefExamS(직업선호도검사 S형), adultJobAptReviseExam(성인용 직업적성검사(개정))태그안의 total태그를 확인
		- 하나라도 1이상이면 API결과를 `검사 결과 저장 테이블`에 저장 +  `검사 페이지 접근 로그 테이블`에 해당하는 항목에 Y 업데이트
	- 두 항목 모두 Y일 시
		- DO NOTHING